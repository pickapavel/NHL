<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Import statistik ze zápasu (OCR)</title>

<style>
body{margin:0;font-family:Arial;background:#f2f2f2}
.wrapper{max-width:1200px;margin:0 auto;background:white;padding:30px}
table{border-collapse:collapse;width:100%;margin-top:20px}
th,td{border:1px solid #999;padding:6px 8px;text-align:center}
th{background:#cfe8f7}
.left{text-align:left}
.filters{margin-bottom:15px;padding:10px;background:#eef6fb}
select{margin-right:10px;padding:5px}
.summary{margin-top:15px;font-weight:bold}
button{padding:6px 10px}
</style>
</head>

<body>
<div class="wrapper">

<h1>Statistiky zápasů</h1>

<!-- FILTRY -->
<div class="filters">
Zobrazit hráče:
<select id="filterPlayer">
<option value="">Vše</option>
<option>Pici</option>
<option>Kubele</option>
</select>

Tým:
<select id="filterTeam">
<option value="">Vše</option>
</select>

Kategorie:
<select id="filterCategory">
<option value="">Vše</option>
<option>OH</option>
<option>Extraliga - základní část</option>
<option>Extraliga - play off</option>
</select>
</div>

<table id="statsTable">
<thead>
<tr>
<th>Tým</th>
<th>Role</th>
<th>Góly vstř.</th>
<th>Góly ink.</th>
<th>Hity dané</th>
<th>Hity obdrž.</th>
<th>Vhaz. vyhr.</th>
<th>Vhaz. prohr.</th>
<th>Čas v útoku</th>
<th>Čas v obraně</th>
<th>Přesilovky</th>
<th>Využ. PP</th>
<th>OT</th>
<th>Kategorie</th>
<th>Hráč</th>
</tr>
</thead>
<tbody>

<!-- DATA ZŮSTÁVAJÍ NATVRDO V HTML -->
<tr>
<td class="left">HC Geus Okna Kladno</td>
<td>Hosté</td>
<td>30</td><td>18</td>
<td>28</td><td>4</td>
<td>14</td><td>12</td>
<td>11:53</td><td>4:24</td>
<td>1</td><td>1</td>
<td>Ne</td>
<td>Extraliga - základní část</td>
<td>Kubele</td>
</tr>

<tr>
<td class="left">HC Oceláři Třinec</td>
<td>Domácí</td>
<td>18</td><td>30</td>
<td>4</td><td>28</td>
<td>12</td><td>14</td>
<td>4:24</td><td>11:53</td>
<td>1</td><td>1</td>
<td>Ne</td>
<td>Extraliga - základní část</td>
<td>Pici</td>
</tr>

</tbody>
</table>

<div class="summary" id="summary"></div>

</div>

<script>

const table = document.getElementById("statsTable");
const tbody = table.querySelector("tbody");

const filterPlayer = document.getElementById("filterPlayer");
const filterTeam = document.getElementById("filterTeam");
const filterCategory = document.getElementById("filterCategory");

function fillTeams(){
    const teams = new Set();
    [...tbody.rows].forEach(r=>{
        teams.add(r.cells[0].innerText);
    });
    teams.forEach(t=>{
        const o=document.createElement("option");
        o.textContent=t;
        filterTeam.appendChild(o);
    });
}
fillTeams();

function toSeconds(t){
    if(!t.includes(":")) return 0;
    const p=t.split(":");
    return parseInt(p[0])*60+parseInt(p[1]);
}

function applyFilters(){

    let games=0, goals=0, goalsAgainst=0, hits=0;

    [...tbody.rows].forEach(row=>{

        const team=row.cells[0].innerText;
        const player=row.cells[14].innerText;
        const category=row.cells[13].innerText;

        let show=true;

        if(filterPlayer.value && player!==filterPlayer.value) show=false;
        if(filterTeam.value && team!==filterTeam.value) show=false;
        if(filterCategory.value && category!==filterCategory.value) show=false;

        row.style.display = show ? "" : "none";

        if(show){
            games++;
            goals+=parseInt(row.cells[2].innerText)||0;
            goalsAgainst+=parseInt(row.cells[3].innerText)||0;
            hits+=parseInt(row.cells[4].innerText)||0;
        }
    });

    document.getElementById("summary").innerText =
        "Zápasy: "+games+
        " | Góly: "+goals+
        " | Ink.: "+goalsAgainst+
        " | Hity: "+hits;
}

filterPlayer.onchange=applyFilters;
filterTeam.onchange=applyFilters;
filterCategory.onchange=applyFilters;

applyFilters();

</script>

</body>
</html>
